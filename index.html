<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Himalayan Essential - Authentic Products from the Himalayas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèîÔ∏è</text></svg>">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'sans': ['Nunito Sans', 'sans-serif'],
              'serif': ['Lora', 'serif'],
            },
            colors: {
              'brand-green': '#3A5A40',
              'brand-dark-green': '#1E2F23',
              'brand-cream': '#F3EFEA',
              'brand-brown': '#A98743',
              'brand-light-brown': '#D4AC6E',
            }
          }
        }
      }
    </script>
    <style>
        .page { display: none; }
        .page.active { display: block; }
        .nav-link.active {
            color: #A98743; /* brand-brown */
            font-weight: 700;
        }
        .category-link.active {
            background-color: #3A5A40; /* brand-green */
            color: #FFFFFF;
        }
        /* Cart Styles */
        #cart-overlay, #toast-notification {
            transition: all 0.3s ease-in-out;
        }
        #cart-panel {
            transition: transform 0.3s ease-in-out;
        }
        .form-input {
            @apply mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-brown focus:border-brand-brown;
        }
        .form-label {
             @apply block text-sm font-medium text-gray-700;
        }
    </style>
</head>
<body class="bg-brand-cream text-gray-800 font-sans">

    <!-- Header -->
    <header id="main-header" class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-40">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- This is the NEW code with your logo -->
<a href="#home" class="nav-link text-2xl font-serif font-semibold text-brand-dark-green flex items-center">
    <!-- Replace 'logo.png' with the actual name of your logo file -->
    <img src="logo.png" alt="Himalayan Essential Logo" class="h-20 w-50 mr-3 object-contain">
</a>
            <div class="hidden md:flex space-x-8 items-center text-lg">
                <a href="#home" class="nav-link active">Home</a>
                <a href="#shop" class="nav-link">Shop</a>
                <a href="#about" class="nav-link">About Us</a>
                <a href="#contact" class="nav-link">Contact</a>
            </div>
            <div class="flex items-center space-x-4">
                <button id="cart-button" class="flex items-center space-x-2 text-brand-green">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    <span id="cart-count" class="bg-brand-brown text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </button>
                <button id="mobile-menu-button" class="md:hidden text-brand-green">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="#home" class="nav-link-mobile block py-2 text-gray-700">Home</a>
            <a href="#shop" class="nav-link-mobile block py-2 text-gray-700">Shop</a>
            <a href="#about" class="nav-link-mobile block py-2 text-gray-700">About Us</a>
            <a href="#contact" class="nav-link-mobile block py-2 text-gray-700">Contact</a>
        </div>
    </header>

    <main>

        <!-- Home Page -->
        <div id="page-home" class="page active">
            <section class="relative bg-brand-dark-green text-white">
                <img src="image-bg.png" alt="Himalayan landscape" class="absolute inset-0 w-full h-full object-cover opacity-20">
                <div class="relative coHarvestntainer mx-auto px-6 py-32 md:py-48 text-center">
                    <h1 class="text-4xl md:text-6xl font-serif font-semibold leading-tight mb-4">Purity from Peak to Package</h1>
                    <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto text-gray-200">Authentic, sustainably sourced essentials from the heart of the Himalayas.</p>
                    <a href="#shop" class="nav-link bg-brand-brown hover:bg-brand-light-brown text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors">Explore Our Products</a>
                </div>
            </section>
            
            <section class="py-20">
                <div class="container mx-auto px-6">
                    <h2 class="text-3xl md:text-4xl font-serif text-center text-brand-dark-green mb-12">Shop by Category</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <a href="#shop" data-category="teas" class="category-card-link group block text-center">
                            <div class="overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                                <img src="https://placehold.co/400x400/D4AC6E/3A5A40?text=Herbal+Teas" alt="Herbal Teas" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h3 class="mt-4 text-xl font-semibold text-brand-green">Herbal Teas & Infusions</h3>
                        </a>
                        <a href="#shop" data-category="pulses" class="category-card-link group block text-center">
                            <div class="overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                                <img src="https://placehold.co/400x400/A98743/F3EFEA?text=Pulses+%26+Grains" alt="Pulses & Grains" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h3 class="mt-4 text-xl font-semibold text-brand-green">Pulses & Grains</h3>
                        </a>
                         <a href="#shop" data-category="nuts" class="category-card-link group block text-center">
                            <div class="overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                                <img src="https://placehold.co/400x400/8c6d36/ffffff?text=Nuts+%26+Dry+Fruits" alt="Nuts & Dry Fruits" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h3 class="mt-4 text-xl font-semibold text-brand-green">Nuts & Dry Fruits</h3>
                        </a>
                        <a href="#shop" data-category="pantry" class="category-card-link group block text-center">
                            <div class="overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                                <img src="https://placehold.co/400x400/c7a58a/3A5A40?text=Pantry+Staples" alt="Pantry Staples" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h3 class="mt-4 text-xl font-semibold text-brand-green">Pantry Staples</h3>
                        </a>
                    </div>
                </div>
            </section>
        </div>

        <!-- Shop Page -->
        <div id="page-shop" class="page">
             <section class="py-12">
                <div class="container mx-auto px-6">
                    <h1 class="text-4xl font-serif text-center text-brand-dark-green mb-8">Our Products</h1>
                    <div class="flex flex-col md:flex-row gap-8">
                        <!-- Sidebar -->
                        <aside class="md:w-1/4">
                            <h3 class="text-2xl font-semibold text-brand-dark-green mb-4">Categories</h3>
                            <ul id="category-filter" class="space-y-2">
                                <li><a href="#" data-category="all" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10 active">All Products</a></li>
                                <li><a href="#" data-category="pulses" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10">Pulses & Grains</a></li>
                                <li><a href="#" data-category="nuts" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10">Nuts & Dry Fruits</a></li>
                                <li><a href="#" data-category="teas" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10">Herbal Teas</a></li>
                                <li><a href="#" data-category="pantry" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10">Pantry Staples</a></li>
                            </ul>
                        </aside>
                        <!-- Products Grid -->
                        <div id="product-grid" class="md:w-3/4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                            <!-- Products will be injected here by JS -->
                        </div>
                    </div>
                </div>
             </section>
        </div>

        <!-- About Page -->
        <div id="page-about" class="page">
            <section class="py-20 bg-white">
                <div class="container mx-auto px-6 text-center">
                    <h1 class="text-4xl md:text-5xl font-serif text-brand-dark-green">From the Heart of the Himalayas</h1>
                    <p class="text-lg text-gray-600 mt-4 max-w-3xl mx-auto">Our journey is one of passion, purity, and partnership.</p>
                </div>
            </section>
             <section class="py-20">
                <div class="container mx-auto px-6">
                     <div class="flex flex-col md:flex-row items-center gap-12">
                        <div class="md:w-1/2">
                            <img src="https://placehold.co/600x500/8db5a9/ffffff?text=Our+Mission" alt="Himalayan Farmer" class="rounded-lg shadow-lg w-full h-full object-cover">
                        </div>
                        <div class="md:w-1/2">
                            <h2 class="text-3xl font-serif text-brand-dark-green mb-4">Our Mission</h2>
                            <p class="text-gray-700 mb-4 leading-relaxed">Himalayan Essential began not as a business, but as a passion to bridge the distance between the pristine, untouched valleys of Himachal Pradesh and your home. We journey deep into the mountains, partnering with generations-old farming families who cultivate their land with respect and time-honored traditions.</p>
                            <p class="text-gray-700 leading-relaxed">Our promise is simple: to bring you products that are as pure as the mountain air. We believe in fair partnerships that empower local communities, sustainable practices that honor the earth, and quality that speaks for itself. Every jar of honey, every handful of walnuts, carries a story of its origin.</p>
                        </div>
                    </div>
                </div>
             </section>
        </div>

        <!-- Contact Page -->
        <div id="page-contact" class="page">
             <section class="py-20">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-12">
                         <h1 class="text-4xl md:text-5xl font-serif text-brand-dark-green">Get in Touch</h1>
                         <p class="text-lg text-gray-600 mt-4 max-w-2xl mx-auto">We'd love to hear from you. Whether you have a question about our products, our practices, or just want to say hello, please reach out.</p>
                    </div>
                    <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 bg-white p-8 rounded-lg shadow-md">
                        <div>
                            <h3 class="text-2xl font-semibold text-brand-dark-green mb-4">Contact Information</h3>
                            <p class="text-gray-700 mb-2">üìß <a href="mailto:contact.himalayanessential@gmail.com" class="hover:text-brand-brown">contact.himalayanessential@gmail.com</a></p>
                            <p class="text-gray-700 mb-4">üìû <a href="tel:+919876543210" class="hover:text-brand-brown">+91 98765 43210</a></p>
                            <h3 class="text-2xl font-semibold text-brand-dark-green mt-8 mb-4">Follow Us</h3>
                            <div class="flex space-x-4">
                                <a href="#" class="text-gray-500 hover:text-brand-brown"><svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.28C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z" /></svg></a>
                                <a href="#" class="text-gray-500 hover:text-brand-brown"><svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.237 2.636 7.855 6.356 9.312-.087-.636-.037-1.33.14-1.95.183-.65.41-1.28.67-1.83.25-.52.5-1 .74-1.42.25-.43.48-.82.7-1.15.22-.32.4-.6.53-.8.13-.2.2-.3.2-.3s-.1-.1-.2-.2c-.1-.1-.3-.2-.4-.3-.1-.1-.2-.2-.2-.3 0-.1.1-.3.2-.4.1-.1.2-.2.3-.2.1-.1.3-.1.5-.1h.3c.2 0 .4 0 .6.1.2 0 .3.1.5.1.2.1.3.1.5.2l.2.2c.2.1.4.2.5.3.2.1.3.3.4.4.1.1.2.3.2.4s0 .3-.1.4c-.1.1-.2.2-.3.3-.1.1-.2.2-.2.3s.1.2.2.3c.1.1.2.3.4.4.1.1.2.2.3.3.1.1.2.2.2.3s0 .2-.1.3c-.1.1-.1.2-.2.3l-.2.3c-.2.2-.3.4-.5.6l-.3.4c-.1.1-.2.2-.2.3v.1c.1.2.2.4.3.6.1.2.2.4.3.6.1.2.2.4.3.6.1.2.2.4.2.6.1.2.1.4.1.6 0 .2 0 .4-.1.6-.1.2-.1.4-.2.5-.1.2-.2.3-.4.4-.1.1-.3.2-.5.2-.2.1-.4.1-.6.1-.2 0-.5 0-.7-.1-.2-.1-.4-.1-.6-.2-.2-.1-.4-.2-.5-.3-.2-.1-.3-.3-.4-.4-.1-.1-.2-.3-.2-.4l-.1-.2c-.1-.1-.1-.2-.1-.3s.1-.3.1-.4c.1-.1.1-.2.2-.3.1-.1.2-.2.2-.3s-.1-.2-.2-.3c-.1-.1-.2-.2-.4-.3-.1-.1-.3-.2-.5-.2h-.2c-.2 0-.4 0-.6.1-.2.1-.4.1-.5.2-.1.1-.3.2-.4.3-.1.1-.2.3-.2.4s0 .3.1.4c.1.1.2.2.3.3l.2.2c.1.1.2.2.2.3s-.1.2-.2.3c-.1.1-.2.2-.3.3-.1.1-.2.2-.2.3s.1.2.1.3c.1.1.2.2.2.3l.1.1c.1.1.2.2.3.3.2.1.4.3.5.4.2.1.4.3.5.4.1.1.2.2.2.3 0 .1 0 .2-.1.3-.1.1-.1.2-.2.3l-.2.2c-.1.1-.2.2-.3.3s-.2.2-.2.3c-.1.1-.1.2-.1.3 0 .1.1.3.1.4.1.2.2.4.2.6v.3c0 .1 0 .3-.1.4s-.1.3-.2.4c-.1.1-.2.2-.3.3-.1.1-.2.1-.4.2-.1.1-.2.1-.3.1h-.1c-.1 0-.3 0-.4-.1-.1 0-.2-.1-.3-.1s-.2-.1-.3-.2-.2-.1-.3-.2-.2-.1-.3-.2-.2-.1-.3-.2l-.3-.3c-.4-.4-.7-.8-1-1.3-.3-.4-.5-.9-.7-1.3-.2-.4-.3-.8-.3-1.3 0-.4.1-.8.2-1.2.1-.4.3-.7.5-1.1.2-.3.4-.6.7-.9.3-.3.6-.5 1-.6.4-.2.8-.2 1.2-.2s.8.1 1.2.2c.4.1.7.3 1 .6.3.3.5.6.7.9.2.3.4.7.5 1.1.1.4.2.8.2 1.2 0 .5-.1.9-.3 1.3-.2.5-.4.9-.7 1.3s-.6.8-1 1.3c-.4.4-.8.7-1.3.9-.5.2-1 .3-1.5.3-.5 0-1-.1-1.5-.3-.5-.2-.9-.5-1.3-.9s-.7-.8-1-1.3c-.3-.5-.5-1-.7-1.5-.2-.5-.3-1-.3-1.5s.1-1 .3-1.5c.2-.5.4-1 .7-1.5.3-.5.7-.9 1.1-1.3.4-.4.8-.7 1.3-.9.5-.2 1-.3 1.5-.3s1 .1 1.5.3c.5.2.9.5 1.3.9.4.4.7.8 1 1.3.3.5.5 1 .7 1.5.2.5.3 1 .3 1.5z" clip-rule="evenodd" /></svg></a>
                            </div>
                        </div>
                        <form action="#" class="space-y-4">
                            <div>
                                <label for="name" class="form-label">Name</label>
                                <input type="text" id="name" name="name" class="form-input">
                            </div>
                            <div>
                                <label for="email" class="form-label">Email</label>
                                <input type="email" id="email" name="email" class="form-input">
                            </div>
                            <div>
                                <label for="message" class="form-label">Message</label>
                                <textarea id="message" name="message" rows="4" class="form-input"></textarea>
                            </div>
                            <div>
                                <button type="submit" class="w-full bg-brand-green hover:bg-brand-dark-green text-white font-bold py-3 px-6 rounded-lg transition-colors">Send Message</button>
                            </div>
                        </form>
                    </div>
                </div>
             </section>
        </div>
        
        <!-- Checkout Page -->
        <div id="page-checkout" class="page bg-white">
            <div class="container mx-auto">
                <div class="lg:grid lg:grid-cols-2">
                    <!-- Left Side: Form -->
                    <div class="py-12 px-6 lg:px-12 xl:px-24 border-r border-gray-200">
                        <div class="text-center lg:text-left">
                            <a href="#home" class="nav-link text-3xl font-serif font-semibold text-brand-dark-green">
                                Himalayan Essential
                            </a>
                        </div>
                        
                        <div class="text-sm text-gray-500 my-8">
                            <span class="text-brand-brown">Cart</span>
                            <span> > </span>
                            <span>Information</span>
                            <span> > </span>
                            <span>Shipping</span>
                             <span> > </span>
                            <span>Payment</span>
                        </div>

                        <form action="#">
                            <section>
                                <h2 class="text-xl font-semibold text-brand-dark-green mb-4">Contact Information</h2>
                                <input type="email" placeholder="Email" class="form-input" required>
                            </section>

                            <section class="mt-8">
                                <h2 class="text-xl font-semibold text-brand-dark-green mb-4">Shipping Address</h2>
                                <div class="space-y-4">
                                    <select class="form-input"><option>India</option></select>
                                    <div class="grid grid-cols-2 gap-4">
                                        <input type="text" placeholder="First name" class="form-input" required>
                                        <input type="text" placeholder="Last name" class="form-input" required>
                                    </div>
                                    <input type="text" placeholder="Address" class="form-input" required>
                                    <input type="text" placeholder="Apartment, suite, etc. (optional)" class="form-input">
                                    <div class="grid grid-cols-2 gap-4">
                                        <select id="state-select" class="form-input" required><option value="">Select State</option></select>
                                        <select id="district-select" class="form-input" required disabled><option value="">Select District</option></select>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <input type="text" placeholder="City" class="form-input" required>
                                        <input type="text" placeholder="PIN code" class="form-input" required>
                                    </div>
                                    <input type="tel" placeholder="Phone" class="form-input" required>
                                </div>
                            </section>
                            
                            <div class="flex flex-col-reverse lg:flex-row items-center justify-between mt-8">
                                <a href="#" id="return-to-cart-link" class="text-brand-brown hover:underline mt-4 lg:mt-0">
                                    &lt; Return to cart
                                </a>
                                <button type="submit" class="w-full lg:w-auto bg-brand-green hover:bg-brand-dark-green text-white font-bold py-4 px-6 rounded-lg transition-colors">
                                    Continue to Shipping
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Right Side: Order Summary -->
                    <div class="py-12 px-6 lg:px-12 bg-gray-50">
                        <div id="checkout-summary-items" class="space-y-4">
                           <!-- Checkout items injected here -->
                        </div>
                        
                        <div class="py-4 my-4 border-t border-b border-gray-200 text-gray-700">
                             <div class="flex justify-between mb-2">
                                <span>Subtotal</span>
                                <span id="checkout-subtotal" class="font-semibold">‚Çπ0.00</span>
                            </div>
                             <div class="flex justify-between">
                                <span>Shipping</span>
                                <span id="checkout-shipping" class="font-semibold">‚Çπ50.00</span>
                            </div>
                        </div>

                        <div class="flex justify-between items-center text-lg">
                            <span class="font-semibold">Total</span>
                            <span id="checkout-total" class="font-bold text-2xl text-brand-dark-green">‚Çπ50.00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>
    
    <!-- Shopping Cart Panel -->
    <div id="cart-overlay" class="fixed inset-0 bg-black/50 z-50 hidden opacity-0">
        <div id="cart-panel" class="fixed top-0 right-0 h-full w-full max-w-md bg-brand-cream shadow-2xl transform translate-x-full">
            <div class="flex flex-col h-full">
                <!-- Cart Header -->
                <div class="flex justify-between items-center p-6 border-b border-gray-200">
                    <h2 class="text-2xl font-serif text-brand-dark-green">Your Cart</h2>
                    <button id="close-cart-btn" class="text-gray-500 hover:text-gray-800">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                
                <!-- Cart Items -->
                <div id="cart-items-container" class="flex-grow p-6 overflow-y-auto">
                     <div id="empty-cart-message" class="text-center text-gray-500 mt-10 hidden">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                        <p class="mt-4">Your cart is currently empty.</p>
                     </div>
                </div>
                
                <!-- Cart Footer -->
                <div id="cart-footer" class="p-6 border-t border-gray-200 bg-white">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-lg font-semibold text-gray-700">Subtotal</span>
                        <span id="cart-subtotal" class="text-xl font-bold text-brand-dark-green">‚Çπ0.00</span>
                    </div>
                    <p class="text-sm text-gray-500 mb-4">Shipping and taxes calculated at checkout.</p>
                    <button id="checkout-btn" class="w-full bg-brand-green hover:bg-brand-dark-green text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg disabled:bg-gray-400" disabled>
                        Proceed to Checkout
                    </button>
                    <p class="text-xs text-center text-gray-400 mt-2">You can attach Razorpay to the checkout button.</p>
                </div>
            </div>
        </div>
    </div>
    
     <!-- Toast Notification -->
    <div id="toast-notification" class="fixed bottom-5 right-5 bg-brand-dark-green text-white py-3 px-6 rounded-lg shadow-lg transform translate-y-20 opacity-0">
        Item added to cart!
    </div>
    
    <!-- Footer -->
    <footer id="main-footer" class="bg-brand-dark-green text-brand-cream">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-serif font-semibold mb-4">Himalayan Essential</h3>
                    <p class="text-gray-400">Purity from Peak to Package.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4">Shop</h3>
                    <ul class="text-gray-400 space-y-2">
                        <li><a href="#shop" data-category="all" class="footer-link hover:text-white">All Products</a></li>
                        <li><a href="#shop" data-category="pulses" class="footer-link hover:text-white">Pulses & Grains</a></li>
                        <li><a href="#shop" data-category="nuts" class="footer-link hover:text-white">Nuts & Dry Fruits</a></li>
                        <li><a href="#shop" data-category="teas" class="footer-link hover:text-white">Herbal Teas</a></li>
                        <li><a href="#shop" data-category="pantry" class="footer-link hover:text-white">Pantry Staples</a></li>
                    </ul>
                </div>
                 <div>
                    <h3 class="text-xl font-semibold mb-4">Our Company</h3>
                    <ul class="text-gray-400 space-y-2">
                        <li><a href="#about" class="footer-link hover:text-white">About Us</a></li>
                        <li><a href="#contact" class="footer-link hover:text-white">Contact Us</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4">Contact Us</h3>
                    <p class="text-gray-400 mb-2">üìß contact.himalayanessential@gmail.com</p>
                    <p class="text-gray-400">üìû +91 98765 43210</p>
                </div>
            </div>
            <div class="mt-8 border-t border-gray-700 pt-8 text-center text-gray-400">
                <p>&copy; 2025 Himalayan Essential. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        const products = [
            { id: 1, name: 'Premium Walnuts (Kagzi)', price: 750, unit: 'kg', description: 'Crisp, flavorful, and packed with Omega-3 from Kinnaur.', category: 'nuts', img: 'https://placehold.co/100x100/c7a58a/ffffff?text=W' },
            { id: 2, name: 'Organic Kidney Beans (Rajma)', price: 250, unit: 'kg', description: 'Famous for their unique taste, grown organically in Bharmour.', category: 'pulses', img: 'https://placehold.co/100x100/a35757/ffffff?text=K' },
            { id: 3, name: 'Wildflower Honey', price: 500, unit: '500g', description: 'Raw, unprocessed honey from the wild blossoms of Himalayan forests.', category: 'pantry', img: 'https://placehold.co/100x100/f5c542/ffffff?text=H' },
            { id: 4, name: 'SeeBuck Thorn (Chaaku)', price: 600, unit: '250g', description: 'Immunity-boosting tea from Lahaul & Spiti, rich in Vitamin C.', category: 'teas', img: 'https://placehold.co/100x100/f7a42a/ffffff?text=S' },
            { id: 5, name: 'Bichu Butti (Nettle Tea)', price: 450, unit: '100g', description: 'Wild Himalayan stinging nettle with cleansing properties.', category: 'teas', img: 'https://placehold.co/100x100/6b8e23/ffffff?text=B' },
            { id: 6, name: 'High-Altitude Rajmah', price: 280, unit: 'kg', description: 'Pesticide-free, protein-rich pulse with superior taste.', category: 'pulses', img: 'https://placehold.co/100x100/c47171/ffffff?text=R' },
            { id: 7, name: 'Desi Akhrot (Local Walnut)', price: 700, unit: 'kg', description: 'Thin-shelled, buttery walnuts from Lugvalley, rich in Omega-3.', category: 'nuts', img: 'https://placehold.co/100x100/b58e6f/ffffff?text=D' },
            { id: 8, name: 'Himalayan Raw Honey', price: 850, unit: '500g', description: 'Pure, medicinal honey from diverse wildflowers, harvested once a year.', category: 'pantry', img: 'https://placehold.co/100x100/ffbf00/ffffff?text=H' },
            { id: 9, name: 'Traditional Himalayan Ghee', price: 950, unit: '500g', description: 'Rich, nutty ghee from the pure milk of free-grazing cattle.', category: 'pantry', img: 'https://placehold.co/100x100/fcd34d/ffffff?text=G' },
        ];
        
        const indianStatesAndDistricts = {
            "Andaman and Nicobar Islands": ["Nicobar", "North and Middle Andaman", "South Andaman"],
            "Andhra Pradesh": ["Anantapur", "Chittoor", "East Godavari", "Guntur", "Krishna", "Kurnool", "Prakasam", "Srikakulam", "Sri Potti Sriramulu Nellore", "Visakhapatnam", "Vizianagaram", "West Godavari", "Y.S.R. Kadapa"],
            "Arunachal Pradesh": ["Anjaw", "Changlang", "Dibang Valley", "East Kameng", "East Siang", "Kamle", "Kra Daadi", "Kurung Kumey", "Lepa Rada", "Lohit", "Longding", "Lower Dibang Valley", "Lower Siang", "Lower Subansiri", "Namsai", "Pakke-Kessang", "Papum Pare", "Shi Yomi", "Siang", "Tawang", "Tirap", "Upper Siang", "Upper Subansiri", "West Kameng", "West Siang"],
            "Assam": ["Baksa", "Barpeta", "Biswanath", "Bongaigaon", "Cachar", "Charaideo", "Chirang", "Darrang", "Dhemaji", "Dhubri", "Dibrugarh", "Dima Hasao", "Goalpara", "Golaghat", "Hailakandi", "Hojai", "Jorhat", "Kamrup", "Kamrup Metropolitan", "Karbi Anglong", "Karimganj", "Kokrajhar", "Lakhimpur", "Majuli", "Morigaon", "Nagaon", "Nalbari", "Sivasagar", "Sonitpur", "South Salmara-Mankachar", "Tinsukia", "Udalguri", "West Karbi Anglong"],
            "Bihar": ["Araria", "Arwal", "Aurangabad", "Banka", "Begusarai", "Bhagalpur", "Bhojpur", "Buxar", "Darbhanga", "East Champaran", "Gaya", "Gopalganj", "Jamui", "Jehanabad", "Kaimur", "Katihar", "Khagaria", "Kishanganj", "Lakhisarai", "Madhepura", "Madhubani", "Munger", "Muzaffarpur", "Nalanda", "Nawada", "Patna", "Purnia", "Rohtas", "Saharsa", "Samastipur", "Saran", "Sheikhpura", "Sheohar", "Sitamarhi", "Siwan", "Supaul", "Vaishali", "West Champaran"],
            "Chandigarh": ["Chandigarh"],
            "Chhattisgarh": ["Balod", "Baloda Bazar", "Balrampur", "Bastar", "Bemetara", "Bijapur", "Bilaspur", "Dantewada", "Dhamtari", "Durg", "Gariaband", "Gaurela-Pendra-Marwahi", "Janjgir-Champa", "Jashpur", "Kabirdham", "Kanker", "Kondagaon", "Korba", "Koriya", "Mahasamund", "Mungeli", "Narayanpur", "Raigarh", "Raipur", "Rajnandgaon", "Sukma", "Surajpur", "Surguja"],
            "Dadra and Nagar Haveli and Daman and Diu": ["Daman", "Diu", "Dadra and Nagar Haveli"],
            "Delhi": ["Central Delhi", "East Delhi", "New Delhi", "North Delhi", "North East Delhi", "North West Delhi", "Shahdara", "South Delhi", "South East Delhi", "South West Delhi", "West Delhi"],
            "Goa": ["North Goa", "South Goa"],
            "Gujarat": ["Ahmedabad", "Amreli", "Anand", "Aravalli", "Banaskantha", "Bharuch", "Bhavnagar", "Botad", "Chhota Udaipur", "Dahod", "Dang", "Devbhoomi Dwarka", "Gandhinagar", "Gir Somnath", "Jamnagar", "Junagadh", "Kheda", "Kutch", "Mahisagar", "Mehsana", "Morbi", "Narmada", "Navsari", "Panchmahal", "Patan", "Porbandar", "Rajkot", "Sabarkantha", "Surat", "Surendranagar", "Tapi", "Vadodara", "Valsad"],
            "Haryana": ["Ambala", "Bhiwani", "Charkhi Dadri", "Faridabad", "Fatehabad", "Gurugram", "Hisar", "Jhajjar", "Jind", "Kaithal", "Karnal", "Kurukshetra", "Mahendragarh", "Nuh", "Palwal", "Panchkula", "Panipat", "Rewari", "Rohtak", "Sirsa", "Sonipat", "Yamunanagar"],
            "Himachal Pradesh": ["Bilaspur", "Chamba", "Hamirpur", "Kangra", "Kinnaur", "Kullu", "Lahaul and Spiti", "Mandi", "Shimla", "Sirmaur", "Solan", "Una"],
            "Jammu and Kashmir": ["Anantnag", "Bandipora", "Baramulla", "Budgam", "Doda", "Ganderbal", "Jammu", "Kathua", "Kishtwar", "Kulgam", "Kupwara", "Poonch", "Pulwama", "Rajouri", "Ramban", "Reasi", "Samba", "Shopian", "Srinagar", "Udhampur"],
            "Jharkhand": ["Bokaro", "Chatra", "Deoghar", "Dhanbad", "Dumka", "East Singhbhum", "Garhwa", "Giridih", "Godda", "Gumla", "Hazaribagh", "Jamtara", "Khunti", "Koderma", "Latehar", "Lohardaga", "Pakur", "Palamu", "Ramgarh", "Ranchi", "Sahebganj", "Seraikela-Kharsawan", "Simdega", "West Singhbhum"],
            "Karnataka": ["Bagalkot", "Ballari", "Belagavi", "Bengaluru Rural", "Bengaluru Urban", "Bidar", "Chamarajanagar", "Chikkaballapur", "Chikkamagaluru", "Chitradurga", "Dakshina Kannada", "Davanagere", "Dharwad", "Gadag", "Hassan", "Haveri", "Kalaburagi", "Kodagu", "Kolar", "Koppal", "Mandya", "Mysuru", "Raichur", "Ramanagara", "Shivamogga", "Tumakuru", "Udupi", "Uttara Kannada", "Vijayapura", "Yadgir"],
            "Kerala": ["Alappuzha", "Ernakulam", "Idukki", "Kannur", "Kasaragod", "Kollam", "Kottayam", "Kozhikode", "Malappuram", "Palakkad", "Pathanamthitta", "Thiruvananthapuram", "Thrissur", "Wayanad"],
            "Ladakh": ["Kargil", "Leh"],
            "Lakshadweep": ["Lakshadweep"],
            "Madhya Pradesh": ["Agar Malwa", "Alirajpur", "Anuppur", "Ashoknagar", "Balaghat", "Barwani", "Betul", "Bhind", "Bhopal", "Burhanpur", "Chhatarpur", "Chhindwara", "Damoh", "Datia", "Dewas", "Dhar", "Dindori", "Guna", "Gwalior", "Harda", "Hoshangabad", "Indore", "Jabalpur", "Jhabua", "Katni", "Khandwa", "Khargone", "Mandla", "Mandsaur", "Morena", "Narsinghpur", "Neemuch", "Panna", "Raisen", "Rajgarh", "Ratlam", "Rewa", "Sagar", "Satna", "Sehore", "Seoni", "Shahdol", "Shajapur", "Sheopur", "Shivpuri", "Sidhi", "Singrauli", "Tikamgarh", "Ujjain", "Umaria", "Vidisha"],
            "Maharashtra": ["Ahmednagar", "Akola", "Amravati", "Aurangabad", "Beed", "Bhandara", "Buldhana", "Chandrapur", "Dhule", "Gadchiroli", "Gondia", "Hingoli", "Jalgaon", "Jalna", "Kolhapur", "Latur", "Mumbai City", "Mumbai Suburban", "Nagpur", "Nanded", "Nandurbar", "Nashik", "Osmanabad", "Palghar", "Parbhani", "Pune", "Raigad", "Ratnagiri", "Sangli", "Satara", "Sindhudurg", "Solapur", "Thane", "Wardha", "Washim", "Yavatmal"],
            "Manipur": ["Bishnupur", "Chandel", "Churachandpur", "Imphal East", "Imphal West", "Jiribam", "Kakching", "Kamjong", "Kangpokpi", "Noney", "Pherzawl", "Senapati", "Tamenglong", "Tengnoupal", "Thoubal", "Ukhrul"],
            "Meghalaya": ["East Garo Hills", "East Jaintia Hills", "East Khasi Hills", "North Garo Hills", "Ri Bhoi", "South Garo Hills", "South West Garo Hills", "South West Khasi Hills", "West Garo Hills", "West Jaintia Hills", "West Khasi Hills"],
            "Mizoram": ["Aizawl", "Champhai", "Hnahthial", "Khawzawl", "Kolasib", "Lawngtlai", "Lunglei", "Mamit", "Saiha", "Saitual", "Serchhip"],
            "Nagaland": ["Dimapur", "Kiphire", "Kohima", "Longleng", "Mokokchung", "Mon", "Peren", "Phek", "Tuensang", "Wokha", "Zunheboto"],
            "Odisha": ["Angul", "Balangir", "Balasore", "Bargarh", "Bhadrak", "Boudh", "Cuttack", "Deogarh", "Dhenkanal", "Gajapati", "Ganjam", "Jagatsinghpur", "Jajpur", "Jharsuguda", "Kalahandi", "Kandhamal", "Kendrapara", "Kendujhar", "Khordha", "Koraput", "Malkangiri", "Mayurbhanj", "Nabarangpur", "Nayagarh", "Nuapada", "Puri", "Rayagada", "Sambalpur", "Subarnapur", "Sundargarh"],
            "Puducherry": ["Karaikal", "Mahe", "Puducherry", "Yanam"],
            "Punjab": ["Amritsar", "Barnala", "Bathinda", "Faridkot", "Fatehgarh Sahib", "Fazilka", "Ferozepur", "Gurdaspur", "Hoshiarpur", "Jalandhar", "Kapurthala", "Ludhiana", "Mansa", "Moga", "Pathankot", "Patiala", "Rupnagar", "S.A.S. Nagar", "Sangrur", "Shahid Bhagat Singh Nagar", "Sri Muktsar Sahib", "Tarn Taran"],
            "Rajasthan": ["Ajmer", "Alwar", "Banswara", "Baran", "Barmer", "Bharatpur", "Bhilwara", "Bikaner", "Bundi", "Chittorgarh", "Churu", "Dausa", "Dholpur", "Dungarpur", "Hanumangarh", "Jaipur", "Jaisalmer", "Jalore", "Jhalawar", "Jhunjhunu", "Jodhpur", "Karauli", "Kota", "Nagaur", "Pali", "Pratapgarh", "Rajsamand", "Sawai Madhopur", "Sikar", "Sirohi", "Sri Ganganagar", "Tonk", "Udaipur"],
            "Sikkim": ["East Sikkim", "North Sikkim", "South Sikkim", "West Sikkim"],
            "Tamil Nadu": ["Ariyalur", "Chengalpattu", "Chennai", "Coimbatore", "Cuddalore", "Dharmapuri", "Dindigul", "Erode", "Kallakurichi", "Kanchipuram", "Kanyakumari", "Karur", "Krishnagiri", "Madurai", "Mayiladuthurai", "Nagapattinam", "Namakkal", "Nilgiris", "Perambalur", "Pudukkottai", "Ramanathapuram", "Ranipet", "Salem", "Sivaganga", "Tenkasi", "Thanjavur", "Theni", "Thoothukudi", "Tiruchirappalli", "Tirunelveli", "Tirupathur", "Tiruppur", "Tiruvallur", "Tiruvannamalai", "Tiruvarur", "Vellore", "Viluppuram", "Virudhunagar"],
            "Telangana": ["Adilabad", "Bhadradri Kothagudem", "Hyderabad", "Jagtial", "Jangaon", "Jayashankar Bhupalpally", "Jogulamba Gadwal", "Kamareddy", "Karimnagar", "Khammam", "Komaram Bheem", "Mahabubabad", "Mahabubnagar", "Mancherial", "Medak", "Medchal-Malkajgiri", "Mulugu", "Nagarkurnool", "Nalgonda", "Narayanpet", "Nirmal", "Nizamabad", "Peddapalli", "Rajanna Sircilla", "Ranga Reddy", "Sangareddy", "Siddipet", "Suryapet", "Vikarabad", "Wanaparthy", "Warangal Rural", "Warangal Urban", "Yadadri Bhuvanagiri"],
            "Tripura": ["Dhalai", "Gomati", "Khowai", "North Tripura", "Sepahijala", "South Tripura", "Unakoti", "West Tripura"],
            "Uttar Pradesh": ["Agra", "Aligarh", "Ambedkar Nagar", "Amethi", "Amroha", "Auraiya", "Ayodhya", "Azamgarh", "Baghpat", "Bahraich", "Ballia", "Balrampur", "Banda", "Barabanki", "Bareilly", "Basti", "Bhadohi", "Bijnor", "Budaun", "Bulandshahr", "Chandauli", "Chitrakoot", "Deoria", "Etah", "Etawah", "Farrukhabad", "Fatehpur", "Firozabad", "Gautam Buddha Nagar", "Ghaziabad", "Ghazipur", "Gonda", "Gorakhpur", "Hamirpur", "Hapur", "Hardoi", "Hathras", "Jalaun", "Jaunpur", "Jhansi", "Kannauj", "Kanpur Dehat", "Kanpur Nagar", "Kasganj", "Kaushambi", "Kheri", "Kushinagar", "Lalitpur", "Lucknow", "Maharajganj", "Mahoba", "Mainpuri", "Mathura", "Mau", "Meerut", "Mirzapur", "Moradabad", "Muzaffarnagar", "Pilibhit", "Pratapgarh", "Prayagraj", "Raebareli", "Rampur", "Saharanpur", "Sambhal", "Sant Kabir Nagar", "Shahjahanpur", "Shamli", "Shravasti", "Siddharthnagar", "Sitapur", "Sonbhadra", "Sultanpur", "Unnao", "Varanasi"],
            "Uttarakhand": ["Almora", "Bageshwar", "Chamoli", "Champawat", "Dehradun", "Haridwar", "Nainital", "Pauri Garhwal", "Pithoragarh", "Rudraprayag", "Tehri Garhwal", "Udham Singh Nagar", "Uttarkashi"],
            "West Bengal": ["Alipurduar", "Bankura", "Birbhum", "Cooch Behar", "Dakshin Dinajpur", "Darjeeling", "Hooghly", "Howrah", "Jalpaiguri", "Jhargram", "Kalimpong", "Kolkata", "Malda", "Murshidabad", "Nadia", "North 24 Parganas", "Paschim Bardhaman", "Paschim Medinipur", "Purba Bardhaman", "Purba Medinipur", "Purulia", "South 24 Parganas", "Uttar Dinajpur"]
        };

        let cart = [];
        const SHIPPING_COST = 50.00;
        
        document.addEventListener('DOMContentLoaded', () => {
            // --- Element Selectors ---
            const mainHeader = document.getElementById('main-header');
            const mainFooter = document.getElementById('main-footer');
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link, .nav-link-mobile, .footer-link, .category-card-link');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const productGrid = document.getElementById('product-grid');
            const categoryFilter = document.getElementById('category-filter');
            const toast = document.getElementById('toast-notification');
            const returnToCartLink = document.getElementById('return-to-cart-link');

            // Cart Panel Elements
            const cartOverlay = document.getElementById('cart-overlay');
            const cartPanel = document.getElementById('cart-panel');
            const cartButton = document.getElementById('cart-button');
            const closeCartBtn = document.getElementById('close-cart-btn');
            const cartItemsContainer = document.getElementById('cart-items-container');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const cartCountEl = document.getElementById('cart-count');
            const cartSubtotalEl = document.getElementById('cart-subtotal');
            const cartFooter = document.getElementById('cart-footer');
            const checkoutBtn = document.getElementById('checkout-btn');
            
            // Checkout Page Elements
            const checkoutSummaryItems = document.getElementById('checkout-summary-items');
            const checkoutSubtotal = document.getElementById('checkout-subtotal');
            const checkoutShipping = document.getElementById('checkout-shipping');
            const checkoutTotal = document.getElementById('checkout-total');
            const stateSelect = document.getElementById('state-select');
            const districtSelect = document.getElementById('district-select');

            const formatPrice = (price) => `‚Çπ${price.toFixed(2)}`;

            const showToast = (message) => {
                toast.textContent = message;
                toast.classList.remove('translate-y-20', 'opacity-0');
                setTimeout(() => {
                    toast.classList.add('translate-y-20', 'opacity-0');
                }, 3000);
            };

            // --- Cart Logic ---
            const openCart = () => {
                cartOverlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                setTimeout(() => cartOverlay.classList.remove('opacity-0'), 10);
                setTimeout(() => cartPanel.classList.remove('translate-x-full'), 50);
            };

            const closeCart = () => {
                cartPanel.classList.add('translate-x-full');
                cartOverlay.classList.add('opacity-0');
                document.body.style.overflow = '';
                setTimeout(() => cartOverlay.classList.add('hidden'), 300);
            };
            
            const updateCart = () => {
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '';
                    emptyCartMessage.classList.remove('hidden');
                    cartFooter.classList.add('hidden');
                } else {
                    emptyCartMessage.classList.add('hidden');
                    cartFooter.classList.remove('hidden');
                    cartItemsContainer.innerHTML = cart.map(item => `
                        <div class="flex items-center gap-4 py-4 border-b border-gray-200">
                            <img src="${item.img.replace('100x100', '200x200')}" alt="${item.name}" class="w-20 h-20 object-cover rounded-md">
                            <div class="flex-grow">
                                <h4 class="font-semibold text-brand-dark-green">${item.name}</h4>
                                <p class="text-sm text-gray-500">${formatPrice(item.price)} / ${item.unit}</p>
                                <div class="flex items-center mt-2 border border-gray-200 rounded-md w-fit">
                                    <button data-id="${item.id}" class="cart-quantity-btn cart-minus-btn px-2 py-1 text-lg">-</button>
                                    <span class="px-3 font-semibold">${item.quantity}</span>
                                    <button data-id="${item.id}" class="cart-quantity-btn cart-plus-btn px-2 py-1 text-lg">+</button>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold text-lg text-brand-green">${formatPrice(item.price * item.quantity)}</p>
                                <button data-id="${item.id}" class="text-sm text-red-500 hover:underline cart-remove-btn mt-1">Remove</button>
                            </div>
                        </div>
                    `).join('');
                }

                const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                cartSubtotalEl.textContent = formatPrice(subtotal);

                const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
                cartCountEl.textContent = totalItems;
                
                checkoutBtn.disabled = cart.length === 0;
            };
            
            const addToCart = (productId) => {
                const product = products.find(p => p.id === productId);
                if (!product) return;

                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }
                showToast(`${product.name} added to cart`);
                updateCart();
            };

            // --- Checkout Logic ---
            const populateStates = () => {
                const states = Object.keys(indianStatesAndDistricts);
                states.forEach(state => {
                    const option = document.createElement('option');
                    option.value = state;
                    option.textContent = state;
                    stateSelect.appendChild(option);
                });
            };

            const populateDistricts = (state) => {
                districtSelect.innerHTML = '<option value="">Select District</option>';
                if (!state) {
                    districtSelect.disabled = true;
                    return;
                }
                const districts = indianStatesAndDistricts[state];
                districts.forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
                districtSelect.disabled = false;
            };
            
            stateSelect.addEventListener('change', (e) => {
                populateDistricts(e.target.value);
            });

            const renderCheckoutSummary = () => {
                if (cart.length === 0) {
                    showPage('shop');
                    return;
                }
                checkoutSummaryItems.innerHTML = cart.map(item => `
                    <div class="flex items-center gap-4 py-2">
                        <div class="relative">
                            <img src="${item.img}" alt="${item.name}" class="w-16 h-16 object-cover rounded-md border border-gray-200">
                            <span class="absolute -top-2 -right-2 bg-brand-brown text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">${item.quantity}</span>
                        </div>
                        <div class="flex-grow">
                            <p class="font-semibold">${item.name}</p>
                            <p class="text-sm text-gray-500">${item.unit}</p>
                        </div>
                        <p class="font-semibold">${formatPrice(item.price * item.quantity)}</p>
                    </div>
                `).join('');

                const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                const total = subtotal + SHIPPING_COST;
                checkoutSubtotal.textContent = formatPrice(subtotal);
                checkoutShipping.textContent = formatPrice(SHIPPING_COST);
                checkoutTotal.textContent = formatPrice(total);
            };

            // --- Product & Page Rendering Logic ---
            const renderProducts = (category = 'all') => {
                productGrid.innerHTML = '';
                const filteredProducts = category === 'all' 
                    ? products 
                    : products.filter(p => p.category === category);

                filteredProducts.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'bg-white rounded-lg shadow-md overflow-hidden flex flex-col group';
                    productCard.innerHTML = `
                        <div class="overflow-hidden">
                          <img src="${product.img.replace('100x100', '600x400')}" alt="${product.name}" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-500">
                        </div>
                        <div class="p-4 flex flex-col flex-grow">
                            <h3 class="text-xl font-semibold text-brand-dark-green mb-1 flex-grow">${product.name}</h3>
                            <p class="text-gray-600 text-sm mb-3">${product.description}</p>
                            <div class="mt-auto">
                                <span class="text-lg font-bold text-brand-green">${formatPrice(product.price)} / ${product.unit}</span>
                                <button data-id="${product.id}" class="add-to-cart-btn w-full mt-2 bg-brand-green hover:bg-brand-dark-green text-white font-bold py-2 px-4 rounded-lg transition-colors">
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(productCard);
                });
            };
            
            const showPage = (pageId) => {
                pages.forEach(page => page.classList.toggle('active', page.id === `page-${pageId}`));
                
                const isCheckout = pageId === 'checkout';
                mainHeader.style.display = isCheckout ? 'none' : 'block';
                mainFooter.style.display = isCheckout ? 'none' : 'block';

                if (!isCheckout) {
                    document.querySelectorAll('.nav-link').forEach(link => link.classList.toggle('active', link.hash === `#${pageId}`));
                }
                window.scrollTo(0, 0);
            };

            // --- Event Listeners ---
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.hash.substring(1);
                    showPage(pageId);
                    
                    const category = link.dataset.category;
                    if(category) {
                        renderProducts(category);
                        document.querySelectorAll('#category-filter .category-link').forEach(catLink => catLink.classList.toggle('active', catLink.dataset.category === category));
                    }
                    if (!mobileMenu.classList.contains('hidden')) mobileMenu.classList.add('hidden');
                });
            });

            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            
            categoryFilter.addEventListener('click', (e) => {
                if(e.target.tagName === 'A') {
                    e.preventDefault();
                    const category = e.target.dataset.category;
                    renderProducts(category);
                    document.querySelectorAll('#category-filter .category-link').forEach(link => link.classList.remove('active'));
                    e.target.classList.add('active');
                }
            });

            productGrid.addEventListener('click', (e) => {
                if (e.target.classList.contains('add-to-cart-btn')) {
                    const productId = parseInt(e.target.dataset.id);
                    addToCart(productId);
                }
            });

            // Cart Event Listeners
            cartButton.addEventListener('click', openCart);
            closeCartBtn.addEventListener('click', closeCart);
            cartOverlay.addEventListener('click', (e) => { if (e.target === cartOverlay) closeCart(); });
            checkoutBtn.addEventListener('click', () => {
                closeCart();
                renderCheckoutSummary();
                showPage('checkout');
            });
            returnToCartLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage('shop'); 
                openCart();
            });

            cartItemsContainer.addEventListener('click', (e) => {
                const target = e.target;
                const productId = parseInt(target.dataset.id);
                if (!productId) return;
                const itemInCart = cart.find(item => item.id === productId);
                if (!itemInCart) return;

                if (target.classList.contains('cart-plus-btn')) itemInCart.quantity++;
                else if (target.classList.contains('cart-minus-btn')) {
                    itemInCart.quantity--;
                    if (itemInCart.quantity === 0) cart = cart.filter(item => item.id !== productId);
                } else if (target.classList.contains('cart-remove-btn')) {
                    cart = cart.filter(item => item.id !== productId);
                }
                updateCart();
            });

            // --- Initial Render ---
            populateStates();
            renderProducts();
            updateCart();
            showPage('home');
        });
    </script>

</body>
</html>

