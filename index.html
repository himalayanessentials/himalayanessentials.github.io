<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Himalayan Essential - Authentic Products from the Himalayas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèîÔ∏è</text></svg>">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'sans': ['Nunito Sans', 'sans-serif'],
              'serif': ['Lora', 'serif'],
            },
            colors: {
              'brand-green': '#3A5A40',
              'brand-dark-green': '#1E2F23',
              'brand-cream': '#F3EFEA',
              'brand-brown': '#A98743',
              'brand-light-brown': '#D4AC6E',
            }
          }
        }
      }
    </script>
    <style>
        .page { display: none; }
        .page.active { display: block; }
        .nav-link.active {
            color: #A98743; /* brand-brown */
            font-weight: 700;
        }
        .category-link.active {
            background-color: #3A5A40; /* brand-green */
            color: #FFFFFF;
        }
        /* Cart Styles */
        #cart-overlay, #toast-notification {
            transition: all 0.3s ease-in-out;
        }
        #cart-panel {
            transition: transform 0.3s ease-in-out;
        }
        .form-input {
            @apply mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-brown focus:border-brand-brown;
        }
        .form-label {
             @apply block text-sm font-medium text-gray-700;
        }
        .about-slide {
            transition: opacity 1s ease-in-out;
        }
    </style>
</head>
<body class="bg-brand-cream text-gray-800 font-sans">

    <!-- Header -->
    <header id="main-header" class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-40">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#home" class="nav-link text-2xl font-serif font-semibold text-brand-dark-green flex items-center">
                <img src="logo.png" alt="Himalayan Essential Logo" class="h-12 w-auto mr-3 object-contain">
                Himalayan Essential
            </a>
            <div class="hidden md:flex space-x-8 items-center text-lg" id="nav-links-logged-out">
                <a href="#home" class="nav-link active">Home</a>
                <a href="#shop" class="nav-link">Shop</a>
                <a href="#about" class="nav-link">About Us</a>
                <a href="#contact" class="nav-link">Contact</a>
            </div>
             <div class="hidden md:flex items-center space-x-4 text-lg" id="nav-links-logged-in">
                 <span id="user-name" class="font-semibold text-brand-dark-green"></span>
                 <img id="user-picture" class="h-10 w-10 rounded-full" src="" alt="User">
                 <button id="logout-button" class="text-gray-600 hover:text-brand-brown">Logout</button>
            </div>
            <div class="flex items-center space-x-4">
                <button id="cart-button" class="flex items-center space-x-2 text-brand-green">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    <span id="cart-count" class="bg-brand-brown text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </button>
                <button id="mobile-menu-button" class="md:hidden text-brand-green">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="#home" class="nav-link-mobile block py-2 text-gray-700">Home</a>
            <a href="#shop" class="nav-link-mobile block py-2 text-gray-700">Shop</a>
            <a href="#about" class="nav-link-mobile block py-2 text-gray-700">About Us</a>
            <a href="#contact" class="nav-link-mobile block py-2 text-gray-700">Contact</a>
        </div>
    </header>

    <main>

        <!-- Home Page -->
        <div id="page-home" class="page active">
            <section class="relative bg-brand-dark-green text-white">
                <img src="image-bg.png" alt="Himalayan landscape" class="absolute inset-0 w-full h-full object-cover opacity-20">
                <div class="relative container mx-auto px-6 py-32 md:py-48 text-center">
                    <h1 class="text-4xl md:text-6xl font-serif font-semibold leading-tight mb-4">Purity from Peak to Package</h1>
                    <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto text-gray-200">Authentic, sustainably sourced essentials from the heart of the Himalayas.</p>
                    <a href="#shop" class="nav-link bg-brand-brown hover:bg-brand-light-brown text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors">Explore Our Products</a>
                </div>
            </section>
            
            <section class="py-20 bg-white">
                <div class="container mx-auto px-6">
                    <div class="text-center max-w-2xl mx-auto">
                        <h2 class="text-3xl md:text-4xl font-serif text-brand-dark-green mb-4">Shop by Category</h2>
                        <p class="text-gray-600 mb-12">Discover the finest herbs, staples, and delicacies, sourced directly from the pristine Himalayan valleys.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 max-w-7xl mx-auto">
                        <a href="#shop" data-category="teas" class="category-card-link group block text-center">
                            <div class="overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                                <img src="Herbal Teas & Infusions-ct.png" alt="Herbal Teas" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h3 class="mt-4 text-xl font-semibold text-brand-green">Herbs & Teas</h3>
                        </a>
                        <a href="#shop" data-category="pulses" class="category-card-link group block text-center">
                            <div class="overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                                <img src="Pulses & Grains-ct.png" alt="Pulses & Grains" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h3 class="mt-4 text-xl font-semibold text-brand-green">Pulses</h3>
                        </a>
                         <a href="#shop" data-category="pantry" class="category-card-link group block text-center">
                            <div class="overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                                <img src="Pantry Staples-ct.png" alt="Pantry Staples" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h3 class="mt-4 text-xl font-semibold text-brand-green">Pantry Staples</h3>
                        </a>
                         <a href="#shop" data-category="nuts" class="category-card-link group block text-center">
                            <div class="overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                                <img src="Nuts & Dry Fruits-ct.png" alt="Nuts & Dry Fruits" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h3 class="mt-4 text-xl font-semibold text-brand-green">Nuts</h3>
                        </a>
                        <a href="#shop" data-category="fruits" class="category-card-link group block text-center">
                            <div class="overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                                <img src="Fresh Fruits-ct.png" alt="Fresh Fruits" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h3 class="mt-4 text-xl font-semibold text-brand-green">Fresh Fruits</h3>
                        </a>
                    </div>
                </div>
            </section>
        </div>

        <!-- Shop Page -->
        <div id="page-shop" class="page">
             <section class="py-12">
                <div class="container mx-auto px-6">
                    <h1 class="text-4xl font-serif text-center text-brand-dark-green mb-8">Our Products</h1>
                    <div class="flex flex-col md:flex-row gap-8">
                        <!-- Sidebar -->
                        <aside class="md:w-1/4">
                            <h3 class="text-2xl font-semibold text-brand-dark-green mb-4">Categories</h3>
                            <ul id="category-filter" class="space-y-2">
                                <li><a href="#" data-category="all" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10 active">All Products</a></li>
                                <li><a href="#" data-category="teas" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10">Herbs & Teas</a></li>
                                <li><a href="#" data-category="pulses" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10">Pulses</a></li>
                                <li><a href="#" data-category="pantry" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10">Pantry Staples</a></li>
                                <li><a href="#" data-category="nuts" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10">Nuts</a></li>
                                <li><a href="#" data-category="fruits" class="category-link block px-4 py-2 rounded-md hover:bg-brand-green/10">Fresh Fruits</a></li>
                            </ul>
                        </aside>
                        <!-- Products Grid -->
                        <div id="product-grid" class="md:w-3/4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                            <!-- Products will be injected here by JS -->
                        </div>
                    </div>
                </div>
             </section>
        </div>

        <!-- About Page -->
        <div id="page-about" class="page">
            <section class="py-20 bg-white">
                <div class="container mx-auto px-6 text-center">
                    <h1 class="text-4xl md:text-5xl font-serif text-brand-dark-green">From the Heart of the Himalayas</h1>
                    <p class="text-lg text-gray-600 mt-4 max-w-3xl mx-auto">Our journey is one of passion, purity, and partnership.</p>
                </div>
            </section>
             <section class="py-20">
                <div class="container mx-auto px-6">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                        <div class="relative w-full h-96 rounded-lg shadow-2xl overflow-hidden">
                            <img src="picture1.png" alt="Himalayan Valley" class="about-slide absolute inset-0 w-full h-full object-cover">
                            <img src="picture2.png" alt="Himalayan Farmers" class="about-slide absolute inset-0 w-full h-full object-cover opacity-0">
                            <img src="picture3.png" alt="Himalayan Produce" class="about-slide absolute inset-0 w-full h-full object-cover opacity-0">
                        </div>
                        <div>
                            <h2 class="text-3xl font-serif text-brand-dark-green mb-4">Our Mission</h2>
                            <p class="text-gray-700 mb-4 leading-relaxed">Himalayan Essential was founded out of a desire to close the gap between your house and the natural, unspoiled Himalayan regions, not as a company. From the verdant foothills to the lofty alpine plateaus, we travel the wide Himalayan region in collaboration with long-standing farming families that care for their land with reverence and according to ancient customs.</p>
                            <p class="text-gray-700 leading-relaxed"> Our pledge is straightforward: to provide you with goods as pure as the air in the mountains. We value excellence that speaks for itself, sustainable practices that respect the environment, and equitable relationships that strengthen local communities. Every handful of walnuts and every jar of honey represents the freshness, purity, and everlasting spirit of the Himalayas.</p>
                        </div>
                    </div>
                </div>
             </section>
        </div>

        <!-- Contact Page -->
        <div id="page-contact" class="page">
            <section class="relative py-20 bg-brand-dark-green">
                <img src="image-bg.png" alt="Himalayan landscape" class="absolute inset-0 w-full h-full object-cover opacity-10">
                <div class="relative container mx-auto px-6">
                    <div class="text-center mb-12">
                         <h1 class="text-4xl md:text-5xl font-serif text-white">Get in Touch</h1>
                         <p class="text-lg text-gray-300 mt-4 max-w-2xl mx-auto">Fill out the form below and we'll get back to you as soon as possible.</p>
                    </div>
                    <div class="max-w-2xl mx-auto bg-white p-8 md:p-12 rounded-lg shadow-2xl">
                        <form action="https://api.web3forms.com/submit" class="space-y-6" method="post">

                                <input type="hidden" name="access_key" value="aa1efa4c-812e-4526-9798-b4b6e3fcf5be">

                            <div>
                                <label for="contact-name" class="form-label font-semibold">Name</label>
                                <input type="text" id="contact-name" name="name" class="form-input" placeholder="Your name">
                            </div>
                             <div>
                                <label for="contact-email" class="form-label font-semibold">Email</label>
                                <input type="email" id="contact-email" name="email" class="form-input" placeholder="Your email">
                            </div>
                            <div>
                                <label for="contact-phone" class="form-label font-semibold">Phone</label>
                                <input type="tel" id="contact-phone" name="phone" class="form-input" placeholder="+91 (123) 456-7890">
                            </div>
                            <div>
                                <label for="contact-message" class="form-label font-semibold">Message</label>
                                <textarea id="contact-message" name="message" rows="5" class="form-input" placeholder="Your message"></textarea>
                            </div>
                            <div>
                                <button type="submit" class="w-full bg-brand-green hover:bg-brand-dark-green text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg">Send Message</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- Checkout Page -->
        <div id="page-checkout" class="page bg-white">
            <div class="container mx-auto">
                <div class="lg:grid lg:grid-cols-2">
                    <!-- Left Side: Form -->
                    <div class="py-12 px-6 lg:px-12 xl:px-24 border-r border-gray-200">
                        <div class="text-center lg:text-left">
                            <a href="#home" class="nav-link text-3xl font-serif font-semibold text-brand-dark-green">
                                Himalayan Essential
                            </a>
                        </div>
                        
                        <div class="text-sm text-gray-500 my-8">
                            <span class="text-brand-brown">Cart</span>
                            <span> > </span>
                            <span>Information</span>
                            <span> > </span>
                            <span>Shipping</span>
                             <span> > </span>
                            <span>Payment</span>
                        </div>

                        <form action="#">
                            <section>
                                <h2 class="text-xl font-semibold text-brand-dark-green mb-4">Contact Information</h2>
                                <input type="email" id="checkout-email" placeholder="Email" class="form-input" required>
                            </section>

                            <section class="mt-8">
                                <h2 class="text-xl font-semibold text-brand-dark-green mb-4">Shipping Address</h2>
                                <div class="space-y-4">
                                    <select class="form-input"><option>India</option></select>
                                    <div class="grid grid-cols-2 gap-4">
                                        <input type="text" placeholder="First name" class="form-input" required>
                                        <input type="text" placeholder="Last name" class="form-input" required>
                                    </div>
                                    <input type="text" placeholder="Address" class="form-input" required>
                                    <input type="text" placeholder="Apartment, suite, etc. (optional)" class="form-input">
                                    <div class="grid grid-cols-2 gap-4">
                                        <select id="state-select" class="form-input" required><option value="">Select State</option></select>
                                        <select id="district-select" class="form-input" required disabled><option value="">Select District</option></select>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <input type="text" placeholder="City" class="form-input" required>
                                        <input type="text" placeholder="PIN code" class="form-input" required>
                                    </div>
                                    <input type="tel" placeholder="Phone" class="form-input" required>
                                </div>
                            </section>
                            
                            <div class="flex flex-col-reverse lg:flex-row items-center justify-between mt-8">
                                <a href="#" id="return-to-cart-link" class="text-brand-brown hover:underline mt-4 lg:mt-0">
                                    &lt; Return to cart
                                </a>
                                <button type="submit" class="w-full lg:w-auto bg-brand-green hover:bg-brand-dark-green text-white font-bold py-4 px-6 rounded-lg transition-colors">
                                    Continue to Shipping
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Right Side: Order Summary -->
                    <div class="py-12 px-6 lg:px-12 bg-gray-50">
                        <div id="checkout-summary-items" class="space-y-4">
                           <!-- Checkout items injected here -->
                        </div>
                        
                        <div class="py-4 my-4 border-t border-b border-gray-200 text-gray-700">
                             <div class="flex justify-between mb-2">
                                <span>Subtotal</span>
                                <span id="checkout-subtotal" class="font-semibold">‚Çπ0.00</span>
                            </div>
                             <div class="flex justify-between">
                                <span>Shipping</span>
                                <span id="checkout-shipping" class="font-semibold text-brand-green">FREE</span>
                            </div>
                        </div>

                        <div class="flex justify-between items-center text-lg">
                            <span class="font-semibold">Total</span>
                            <span id="checkout-total" class="font-bold text-2xl text-brand-dark-green">‚Çπ0.00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>
    
    <!-- Shopping Cart Panel -->
    <div id="cart-overlay" class="fixed inset-0 bg-black/50 z-50 hidden opacity-0">
        <div id="cart-panel" class="fixed top-0 right-0 h-full w-full max-w-md bg-brand-cream shadow-2xl transform translate-x-full">
            <div class="flex flex-col h-full">
                <!-- Cart Header -->
                <div class="flex justify-between items-center p-6 border-b border-gray-200">
                    <h2 class="text-2xl font-serif text-brand-dark-green">Your Cart</h2>
                    <button id="close-cart-btn" class="text-gray-500 hover:text-gray-800">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                
                <!-- Cart Items -->
                <div id="cart-items-container" class="flex-grow p-6 overflow-y-auto">
                     <div id="empty-cart-message" class="text-center text-gray-500 mt-10 hidden">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                        <p class="mt-4">Your cart is currently empty.</p>
                     </div>
                </div>
                
                <!-- Cart Footer -->
                <div id="cart-footer" class="p-6 border-t border-gray-200 bg-white">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-lg font-semibold text-gray-700">Subtotal</span>
                        <span id="cart-subtotal" class="text-xl font-bold text-brand-dark-green">‚Çπ0.00</span>
                    </div>
                    <p class="text-sm text-gray-500 mb-4">Shipping is FREE! Taxes calculated at checkout.</p>
                    <button id="checkout-btn" class="w-full bg-brand-green hover:bg-brand-dark-green text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg disabled:bg-gray-400" disabled>
                        Proceed to Checkout
                    </button>
                    <p class="text-xs text-center text-gray-400 mt-2">You can attach Razorpay to the checkout button.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Google Sign-In Modal -->
    <div id="signin-modal-overlay" class="fixed inset-0 bg-black/60 z-50 hidden items-center justify-center">
        <div id="signin-modal" class="bg-white rounded-lg shadow-2xl p-8 text-center max-w-sm m-4">
            <h2 class="text-2xl font-serif text-brand-dark-green mb-4">Please Sign In</h2>
            <p class="text-gray-600 mb-6">You need to sign in to proceed with your order.</p>
            <div id="g_id_signin"></div>
        </div>
    </div>
    
     <!-- Toast Notification -->
    <div id="toast-notification" class="fixed bottom-5 right-5 bg-brand-dark-green text-white py-3 px-6 rounded-lg shadow-lg transform translate-y-20 opacity-0">
        Item added to cart!
    </div>
    
    <!-- Footer -->
    <footer id="main-footer" class="bg-brand-dark-green text-brand-cream">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-serif font-semibold mb-4">Himalayan Essential</h3>
                    <p class="text-gray-400">Purity from Peak to Package.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4">Shop</h3>
                    <ul class="text-gray-400 space-y-2">
                        <li><a href="#shop" data-category="all" class="footer-link hover:text-white">All Products</a></li>
                        <li><a href="#shop" data-category="teas" class="footer-link hover:text-white">Herbs & Teas</a></li>
                        <li><a href="#shop" data-category="pulses" class="footer-link hover:text-white">Pulses</a></li>
                        <li><a href="#shop" data-category="pantry" class="footer-link hover:text-white">Pantry Staples</a></li>
                        <li><a href="#shop" data-category="nuts" class="footer-link hover:text-white">Nuts</a></li>
                        <li><a href="#shop" data-category="fruits" class="footer-link hover:text-white">Fresh Fruits</a></li>
                    </ul>
                </div>
                 <div>
                    <h3 class="text-xl font-semibold mb-4">Our Company</h3>
                    <ul class="text-gray-400 space-y-2">
                        <li><a href="#about" class="footer-link hover:text-white">About Us</a></li>
                        <li><a href="#contact" class="footer-link hover:text-white">Contact Us</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4">Contact Us</h3>
                    <p class="text-gray-400 mb-2">üìß contact.himalayanessential@gmail.com</p>
                    <p class="text-gray-400">üìû +91 76782 25496</p>
                </div>
            </div>
            <div class="mt-8 border-t border-gray-700 pt-8 text-center text-gray-400">
                <p>&copy; 2025 Himalayan Essential. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        const products = [
             { id: 1, name: 'Kunth Roots (Dried)', price: 2000, unit: 'kg', description: 'A traditional Himalayan herb, valued for its medicinal properties.', category: 'teas', img: 'Kunth Roots.png' },
            { id: 2, name: 'Fern Leaves (Dried)', price: 2000, unit: '100g', description: 'Wild-harvested fern leaves, used in local cuisine and remedies.', category: 'teas', img: 'Fern Leaves (Dried).png' },
            { id: 3, name: 'High-Altitude Rajmah', price: 350, unit: 'kg', description: 'High-altitude, pesticide-free kidney beans with a superior taste.', category: 'pulses', img: 'High-Altitude Rajmah.png' },
            { id: 4, name: 'Wildflower Honey', price: 500, unit: '500g', description: 'Raw, unprocessed honey from the wild blossoms of Himalayan forests.', category: 'pantry', img: 'Wildflower Honey.png' },
            { id: 5, name: 'Himalayan Ghee', price: 2500, unit: 'kg', description: 'Rich, nutty ghee crafted from the pure milk of free-grazing cattle.', category: 'pantry', img: 'Himalayan Ghee.png' },
            { id: 6, name: 'Rakhal Green Tea', price: 3000, unit: 'kg', description: 'A premium, high-altitude green tea with a unique flavour profile.', category: 'teas', img: 'Rakhal Green Tea.png' },
            { id: 7, name: 'Bichu Butti (Nettle Tea)', price: 2000, unit: 'kg', description: 'Wild Himalayan stinging nettle with cleansing properties.', category: 'teas', img: 'Bichu Butti (Nettle Tea).png' },
            { id: 8, name: 'Desi Akhrot (Local Walnut)', price: 2500, unit: 'kg', description: 'Premium, thin-shelled walnuts with high oil content and a buttery flavour.', category: 'nuts', img: 'Desi Akhrot (Local Walnut).png' },
            { id: 9, name: 'Gala Apples', price: 230, unit: 'kg', description: 'Crisp, sweet Gala apples sourced directly from high-altitude orchards.', category: 'fruits', img: 'Gala Apples.png' },
            { id: 10, name: 'SeeBuck Thorn (Chaaku)', price: 600, unit: '250g', description: 'Immunity-boosting tea from Lahaul & Spiti, rich in Vitamin C.', category: 'teas', img: 'SeeBuck Thorn (Chaaku).png' },
        ];
        
        const indianStatesAndDistricts = {
            "Andaman and Nicobar Islands": ["Nicobar", "North and Middle Andaman", "South Andaman"],
            "Andhra Pradesh": ["Anantapur", "Chittoor", "East Godavari", "Guntur", "Krishna", "Kurnool", "Prakasam", "Srikakulam", "Sri Potti Sriramulu Nellore", "Visakhapatnam", "Vizianagaram", "West Godavari", "Y.S.R. Kadapa"],
            "Arunachal Pradesh": ["Anjaw", "Changlang", "Dibang Valley", "East Kameng", "East Siang", "Kamle", "Kra Daadi", "Kurung Kumey", "Lepa Rada", "Lohit", "Longding", "Lower Dibang Valley", "Lower Siang", "Lower Subansiri", "Namsai", "Pakke-Kessang", "Papum Pare", "Shi Yomi", "Siang", "Tawang", "Tirap", "Upper Siang", "Upper Subansiri", "West Kameng", "West Siang"],
            "Assam": ["Baksa", "Barpeta", "Biswanath", "Bongaigaon", "Cachar", "Charaideo", "Chirang", "Darrang", "Dhemaji", "Dhubri", "Dibrugarh", "Dima Hasao", "Goalpara", "Golaghat", "Hailakandi", "Hojai", "Jorhat", "Kamrup", "Kamrup Metropolitan", "Karbi Anglong", "Karimganj", "Kokrajhar", "Lakhimpur", "Majuli", "Morigaon", "Nagaon", "Nalbari", "Sivasagar", "Sonitpur", "South Salmara-Mankachar", "Tinsukia", "Udalguri", "West Karbi Anglong"],
            "Bihar": ["Araria", "Arwal", "Aurangabad", "Banka", "Begusarai", "Bhagalpur", "Bhojpur", "Buxar", "Darbhanga", "East Champaran", "Gaya", "Gopalganj", "Jamui", "Jehanabad", "Kaimur", "Katihar", "Khagaria", "Kishanganj", "Lakhisarai", "Madhepura", "Madhubani", "Munger", "Muzaffarpur", "Nalanda", "Nawada", "Patna", "Purnia", "Rohtas", "Saharsa", "Samastipur", "Saran", "Sheikhpura", "Sheohar", "Sitamarhi", "Siwan", "Supaul", "Vaishali", "West Champaran"],
            "Chandigarh": ["Chandigarh"],
            "Chhattisgarh": ["Balod", "Baloda Bazar", "Balrampur", "Bastar", "Bemetara", "Bijapur", "Bilaspur", "Dantewada", "Dhamtari", "Durg", "Gariaband", "Gaurela-Pendra-Marwahi", "Janjgir-Champa", "Jashpur", "Kabirdham", "Kanker", "Kondagaon", "Korba", "Koriya", "Mahasamund", "Mungeli", "Narayanpur", "Raigarh", "Raipur", "Rajnandgaon", "Sukma", "Surajpur", "Surguja"],
            "Dadra and Nagar Haveli and Daman and Diu": ["Daman", "Diu", "Dadra and Nagar Haveli"],
            "Delhi": ["Central Delhi", "East Delhi", "New Delhi", "North Delhi", "North East Delhi", "North West Delhi", "Shahdara", "South Delhi", "South East Delhi", "South West Delhi", "West Delhi"],
            "Goa": ["North Goa", "South Goa"],
            "Gujarat": ["Ahmedabad", "Amreli", "Anand", "Aravalli", "Banaskantha", "Bharuch", "Bhavnagar", "Botad", "Chhota Udaipur", "Dahod", "Dang", "Devbhoomi Dwarka", "Gandhinagar", "Gir Somnath", "Jamnagar", "Junagadh", "Kheda", "Kutch", "Mahisagar", "Mehsana", "Morbi", "Narmada", "Navsari", "Panchmahal", "Patan", "Porbandar", "Rajkot", "Sabarkantha", "Surat", "Surendranagar", "Tapi", "Vadodara", "Valsad"],
            "Haryana": ["Ambala", "Bhiwani", "Charkhi Dadri", "Faridabad", "Fatehabad", "Gurugram", "Hisar", "Jhajjar", "Jind", "Kaithal", "Karnal", "Kurukshetra", "Mahendragarh", "Nuh", "Palwal", "Panchkula", "Panipat", "Rewari", "Rohtak", "Sirsa", "Sonipat", "Yamunanagar"],
            "Himachal Pradesh": ["Bilaspur", "Chamba", "Hamirpur", "Kangra", "Kinnaur", "Kullu", "Lahaul and Spiti", "Mandi", "Shimla", "Sirmaur", "Solan", "Una"],
            "Jammu and Kashmir": ["Anantnag", "Bandipora", "Baramulla", "Budgam", "Doda", "Ganderbal", "Jammu", "Kathua", "Kishtwar", "Kulgam", "Kupwara", "Poonch", "Pulwama", "Rajouri", "Ramban", "Reasi", "Samba", "Shopian", "Srinagar", "Udhampur"],
            "Jharkhand": ["Bokaro", "Chatra", "Deoghar", "Dhanbad", "Dumka", "East Singhbhum", "Garhwa", "Giridih", "Godda", "Gumla", "Hazaribagh", "Jamtara", "Khunti", "Koderma", "Latehar", "Lohardaga", "Pakur", "Palamu", "Ramgarh", "Ranchi", "Sahebganj", "Seraikela-Kharsawan", "Simdega", "West Singhbhum"],
            "Karnataka": ["Bagalkot", "Ballari", "Belagavi", "Bengaluru Rural", "Bengaluru Urban", "Bidar", "Chamarajanagar", "Chikkaballapur", "Chikkamagaluru", "Chitradurga", "Dakshina Kannada", "Davanagere", "Dharwad", "Gadag", "Hassan", "Haveri", "Kalaburagi", "Kodagu", "Kolar", "Koppal", "Mandya", "Mysuru", "Raichur", "Ramanagara", "Shivamogga", "Tumakuru", "Udupi", "Uttara Kannada", "Vijayapura", "Yadgir"],
            "Kerala": ["Alappuzha", "Ernakulam", "Idukki", "Kannur", "Kasaragod", "Kollam", "Kottayam", "Kozhikode", "Malappuram", "Palakkad", "Pathanamthitta", "Thiruvananthapuram", "Thrissur", "Wayanad"],
            "Ladakh": ["Kargil", "Leh"],
            "Lakshadweep": ["Lakshadweep"],
            "Madhya Pradesh": ["Agar Malwa", "Alirajpur", "Anuppur", "Ashoknagar", "Balaghat", "Barwani", "Betul", "Bhind", "Bhopal", "Burhanpur", "Chhatarpur", "Chhindwara", "Damoh", "Datia", "Dewas", "Dhar", "Dindori", "Guna", "Gwalior", "Harda", "Hoshangabad", "Indore", "Jabalpur", "Jhabua", "Katni", "Khandwa", "Khargone", "Mandla", "Mandsaur", "Morena", "Narsinghpur", "Neemuch", "Panna", "Raisen", "Rajgarh", "Ratlam", "Rewa", "Sagar", "Satna", "Sehore", "Seoni", "Shahdol", "Shajapur", "Sheopur", "Shivpuri", "Sidhi", "Singrauli", "Tikamgarh", "Ujjain", "Umaria", "Vidisha"],
            "Maharashtra": ["Ahmednagar", "Akola", "Amravati", "Aurangabad", "Beed", "Bhandara", "Buldhana", "Chandrapur", "Dhule", "Gadchiroli", "Gondia", "Hingoli", "Jalgaon", "Jalna", "Kolhapur", "Latur", "Mumbai City", "Mumbai Suburban", "Nagpur", "Nanded", "Nandurbar", "Nashik", "Osmanabad", "Palghar", "Parbhani", "Pune", "Raigad", "Ratnagiri", "Sangli", "Satara", "Sindhudurg", "Solapur", "Thane", "Wardha", "Washim", "Yavatmal"],
            "Manipur": ["Bishnupur", "Chandel", "Churachandpur", "Imphal East", "Imphal West", "Jiribam", "Kakching", "Kamjong", "Kangpokpi", "Noney", "Pherzawl", "Senapati", "Tamenglong", "Tengnoupal", "Thoubal", "Ukhrul"],
            "Meghalaya": ["East Garo Hills", "East Jaintia Hills", "East Khasi Hills", "North Garo Hills", "Ri Bhoi", "South Garo Hills", "South West Garo Hills", "South West Khasi Hills", "West Garo Hills", "West Jaintia Hills", "West Khasi Hills"],
            "Mizoram": ["Aizawl", "Champhai", "Hnahthial", "Khawzawl", "Kolasib", "Lawngtlai", "Lunglei", "Mamit", "Saiha", "Saitual", "Serchhip"],
            "Nagaland": ["Dimapur", "Kiphire", "Kohima", "Longleng", "Mokokchung", "Mon", "Peren", "Phek", "Tuensang", "Wokha", "Zunheboto"],
            "Odisha": ["Angul", "Balangir", "Balasore", "Bargarh", "Bhadrak", "Boudh", "Cuttack", "Deogarh", "Dhenkanal", "Gajapati", "Ganjam", "Jagatsinghpur", "Jajpur", "Jharsuguda", "Kalahandi", "Kandhamal", "Kendrapara", "Kendujhar", "Khordha", "Koraput", "Malkangiri", "Mayurbhanj", "Nabarangpur", "Nayagarh", "Nuapada", "Puri", "Rayagada", "Sambalpur", "Subarnapur", "Sundargarh"],
            "Puducherry": ["Karaikal", "Mahe", "Puducherry", "Yanam"],
            "Punjab": ["Amritsar", "Barnala", "Bathinda", "Faridkot", "Fatehgarh Sahib", "Fazilka", "Ferozepur", "Gurdaspur", "Hoshiarpur", "Jalandhar", "Kapurthala", "Ludhiana", "Mansa", "Moga", "Pathankot", "Patiala", "Rupnagar", "S.A.S. Nagar", "Sangrur", "Shahid Bhagat Singh Nagar", "Sri Muktsar Sahib", "Tarn Taran"],
            "Rajasthan": ["Ajmer", "Alwar", "Banswara", "Baran", "Barmer", "Bharatpur", "Bhilwara", "Bikaner", "Bundi", "Chittorgarh", "Churu", "Dausa", "Dholpur", "Dungarpur", "Hanumangarh", "Jaipur", "Jaisalmer", "Jalore", "Jhalawar", "Jhunjhunu", "Jodhpur", "Karauli", "Kota", "Nagaur", "Pali", "Pratapgarh", "Rajsamand", "Sawai Madhopur", "Sikar", "Sirohi", "Sri Ganganagar", "Tonk", "Udaipur"],
            "Sikkim": ["East Sikkim", "North Sikkim", "South Sikkim", "West Sikkim"],
            "Tamil Nadu": ["Ariyalur", "Chengalpattu", "Chennai", "Coimbatore", "Cuddalore", "Dharmapuri", "Dindigul", "Erode", "Kallakurichi", "Kanchipuram", "Kanyakumari", "Karur", "Krishnagiri", "Madurai", "Mayiladuthurai", "Nagapattinam", "Namakkal", "Nilgiris", "Perambalur", "Pudukkottai", "Ramanathapuram", "Ranipet", "Salem", "Sivaganga", "Tenkasi", "Thanjavur", "Theni", "Thoothukudi", "Tiruchirappalli", "Tirunelveli", "Tirupathur", "Tiruppur", "Tiruvallur", "Tiruvannamalai", "Tiruvarur", "Vellore", "Viluppuram", "Virudhunagar"],
            "Telangana": ["Adilabad", "Bhadradri Kothagudem", "Hyderabad", "Jagtial", "Jangaon", "Jayashankar Bhupalpally", "Jogulamba Gadwal", "Kamareddy", "Karimnagar", "Khammam", "Komaram Bheem", "Mahabubabad", "Mahabubnagar", "Mancherial", "Medak", "Medchal-Malkajgiri", "Mulugu", "Nagarkurnool", "Nalgonda", "Narayanpet", "Nirmal", "Nizamabad", "Peddapalli", "Rajanna Sircilla", "Ranga Reddy", "Sangareddy", "Siddipet", "Suryapet", "Vikarabad", "Wanaparthy", "Warangal Rural", "Warangal Urban", "Yadadri Bhuvanagiri"],
            "Tripura": ["Dhalai", "Gomati", "Khowai", "North Tripura", "Sepahijala", "South Tripura", "Unakoti", "West Tripura"],
            "Uttar Pradesh": ["Agra", "Aligarh", "Ambedkar Nagar", "Amethi", "Amroha", "Auraiya", "Ayodhya", "Azamgarh", "Baghpat", "Bahraich", "Ballia", "Balrampur", "Banda", "Barabanki", "Bareilly", "Basti", "Bhadohi", "Bijnor", "Budaun", "Bulandshahr", "Chandauli", "Chitrakoot", "Deoria", "Etah", "Etawah", "Farrukhabad", "Fatehpur", "Firozabad", "Gautam Buddha Nagar", "Ghaziabad", "Ghazipur", "Gonda", "Gorakhpur", "Hamirpur", "Hapur", "Hardoi", "Hathras", "Jalaun", "Jaunpur", "Jhansi", "Kannauj", "Kanpur Dehat", "Kanpur Nagar", "Kasganj", "Kaushambi", "Kheri", "Kushinagar", "Lalitpur", "Lucknow", "Maharajganj", "Mahoba", "Mainpuri", "Mathura", "Mau", "Meerut", "Mirzapur", "Moradabad", "Muzaffarnagar", "Pilibhit", "Pratapgarh", "Prayagraj", "Raebareli", "Rampur", "Saharanpur", "Sambhal", "Sant Kabir Nagar", "Shahjahanpur", "Shamli", "Shravasti", "Siddharthnagar", "Sitapur", "Sonbhadra", "Sultanpur", "Unnao", "Varanasi"],
            "Uttarakhand": ["Almora", "Bageshwar", "Chamoli", "Champawat", "Dehradun", "Haridwar", "Nainital", "Pauri Garhwal", "Pithoragarh", "Rudraprayag", "Tehri Garhwal", "Udham Singh Nagar", "Uttarkashi"],
            "West Bengal": ["Alipurduar", "Bankura", "Birbhum", "Cooch Behar", "Dakshin Dinajpur", "Darjeeling", "Hooghly", "Howrah", "Jalpaiguri", "Jhargram", "Kalimpong", "Kolkata", "Malda", "Murshidabad", "Nadia", "North 24 Parganas", "Paschim Bardhaman", "Paschim Medinipur", "Purba Bardhaman", "Purba Medinipur", "Purulia", "South 24 Parganas", "Uttar Dinajpur"]
        };

        let cart = [];
        let currentUser = null;
        const SHIPPING_COST = 0; // FREE Shipping
        
        document.addEventListener('DOMContentLoaded', () => {
            // --- Element Selectors ---
            const mainHeader = document.getElementById('main-header');
            const mainFooter = document.getElementById('main-footer');
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link, .nav-link-mobile, .footer-link, .category-card-link');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const productGrid = document.getElementById('product-grid');
            const categoryFilter = document.getElementById('category-filter');
            const toast = document.getElementById('toast-notification');
            const returnToCartLink = document.getElementById('return-to-cart-link');
            const aboutSlides = document.querySelectorAll('.about-slide');
            
            // Auth Elements
            const signInModalOverlay = document.getElementById('signin-modal-overlay');
            const navLinksLoggedOut = document.getElementById('nav-links-logged-out');
            const navLinksLoggedIn = document.getElementById('nav-links-logged-in');
            const userNameEl = document.getElementById('user-name');
            const userPictureEl = document.getElementById('user-picture');
            const logoutButton = document.getElementById('logout-button');

            // Cart Panel Elements
            const cartOverlay = document.getElementById('cart-overlay');
            const cartPanel = document.getElementById('cart-panel');
            const cartButton = document.getElementById('cart-button');
            const closeCartBtn = document.getElementById('close-cart-btn');
            const cartItemsContainer = document.getElementById('cart-items-container');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const cartCountEl = document.getElementById('cart-count');
            const cartSubtotalEl = document.getElementById('cart-subtotal');
            const cartFooter = document.getElementById('cart-footer');
            const checkoutBtn = document.getElementById('checkout-btn');
            
            // Checkout Page Elements
            const checkoutSummaryItems = document.getElementById('checkout-summary-items');
            const checkoutSubtotal = document.getElementById('checkout-subtotal');
            const checkoutShipping = document.getElementById('checkout-shipping');
            const checkoutTotal = document.getElementById('checkout-total');
            const stateSelect = document.getElementById('state-select');
            const districtSelect = document.getElementById('district-select');
            const checkoutEmailEl = document.getElementById('checkout-email');

            const formatPrice = (price) => `‚Çπ${price.toFixed(2)}`;

            const showToast = (message) => {
                toast.textContent = message;
                toast.classList.remove('translate-y-20', 'opacity-0');
                setTimeout(() => {
                    toast.classList.add('translate-y-20', 'opacity-0');
                }, 3000);
            };
            
            // --- Slideshow Logic ---
            let currentSlide = 0;
            function showSlide(n) {
                aboutSlides.forEach((slide, index) => {
                    slide.classList.toggle('opacity-0', index !== n);
                });
            }
            setInterval(() => {
                currentSlide = (currentSlide + 1) % aboutSlides.length;
                showSlide(currentSlide);
            }, 4000);


            // --- Auth Logic ---
            const openSignInModal = () => {
                signInModalOverlay.classList.remove('hidden');
                signInModalOverlay.classList.add('flex');
            };

            const closeSignInModal = () => {
                signInModalOverlay.classList.add('hidden');
                signInModalOverlay.classList.remove('flex');
            };

            const updateHeaderUI = () => {
                if (currentUser) {
                    navLinksLoggedOut.style.display = 'none';
                    navLinksLoggedIn.style.display = 'flex';
                    userNameEl.textContent = `Hi, ${currentUser.name.split(' ')[0]}`;
                    userPictureEl.src = currentUser.picture;
                } else {
                    navLinksLoggedOut.style.display = 'flex';
                    navLinksLoggedIn.style.display = 'none';
                }
            };
            
            window.handleCredentialResponse = function(response) {
                const responsePayload = (token => {
                    var base64Url = token.split('.')[1];
                    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
                    var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                    }).join(''));
                    return JSON.parse(jsonPayload);
                })(response.credential);

                currentUser = {
                    name: responsePayload.name,
                    email: responsePayload.email,
                    picture: responsePayload.picture
                };
                
                closeSignInModal();
                updateHeaderUI();
                
                // Automatically proceed to checkout after successful login
                closeCart();
                renderCheckoutSummary();
                showPage('checkout');
            }

            logoutButton.addEventListener('click', () => {
                currentUser = null;
                google.accounts.id.disableAutoSelect();
                updateHeaderUI();
                showPage('home');
            });

            // --- Cart Logic ---
            const openCart = () => {
                cartOverlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                setTimeout(() => cartOverlay.classList.remove('opacity-0'), 10);
                setTimeout(() => cartPanel.classList.remove('translate-x-full'), 50);
            };

            const closeCart = () => {
                cartPanel.classList.add('translate-x-full');
                cartOverlay.classList.add('opacity-0');
                document.body.style.overflow = '';
                setTimeout(() => cartOverlay.classList.add('hidden'), 300);
            };
            
            const updateCart = () => {
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '';
                    emptyCartMessage.classList.remove('hidden');
                    cartFooter.classList.add('hidden');
                } else {
                    emptyCartMessage.classList.add('hidden');
                    cartFooter.classList.remove('hidden');
                    cartItemsContainer.innerHTML = cart.map(item => `
                        <div class="flex items-center gap-4 py-4 border-b border-gray-200">
                            <img src="${item.img}" alt="${item.name}" class="w-20 h-20 object-cover rounded-md">
                            <div class="flex-grow">
                                <h4 class="font-semibold text-brand-dark-green">${item.name}</h4>
                                <p class="text-sm text-gray-500">${formatPrice(item.price)} / ${item.unit}</p>
                                <div class="flex items-center mt-2 border border-gray-200 rounded-md w-fit">
                                    <button data-id="${item.id}" class="cart-quantity-btn cart-minus-btn px-2 py-1 text-lg">-</button>
                                    <span class="px-3 font-semibold">${item.quantity}</span>
                                    <button data-id="${item.id}" class="cart-quantity-btn cart-plus-btn px-2 py-1 text-lg">+</button>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold text-lg text-brand-green">${formatPrice(item.price * item.quantity)}</p>
                                <button data-id="${item.id}" class="text-sm text-red-500 hover:underline cart-remove-btn mt-1">Remove</button>
                            </div>
                        </div>
                    `).join('');
                }

                const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                cartSubtotalEl.textContent = formatPrice(subtotal);

                const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
                cartCountEl.textContent = totalItems;
                
                checkoutBtn.disabled = cart.length === 0;
            };
            
            const addToCart = (productId) => {
                const product = products.find(p => p.id === productId);
                if (!product) return;

                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }
                showToast(`${product.name} added to cart`);
                updateCart();
            };

            // --- Checkout Logic ---
            const populateStates = () => {
                const states = Object.keys(indianStatesAndDistricts);
                states.forEach(state => {
                    const option = document.createElement('option');
                    option.value = state;
                    option.textContent = state;
                    stateSelect.appendChild(option);
                });
            };

            const populateDistricts = (state) => {
                districtSelect.innerHTML = '<option value="">Select District</option>';
                if (!state) {
                    districtSelect.disabled = true;
                    return;
                }
                const districts = indianStatesAndDistricts[state];
                districts.forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
                districtSelect.disabled = false;
            };
            
            stateSelect.addEventListener('change', (e) => {
                populateDistricts(e.target.value);
            });

            const renderCheckoutSummary = () => {
                if (cart.length === 0) {
                    showPage('shop');
                    return;
                }
                checkoutSummaryItems.innerHTML = cart.map(item => `
                    <div class="flex items-center gap-4 py-2">
                        <div class="relative">
                            <img src="${item.img}" alt="${item.name}" class="w-16 h-16 object-cover rounded-md border border-gray-200">
                            <span class="absolute -top-2 -right-2 bg-brand-brown text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">${item.quantity}</span>
                        </div>
                        <div class="flex-grow">
                            <p class="font-semibold">${item.name}</p>
                            <p class="text-sm text-gray-500">${item.unit}</p>
                        </div>
                        <p class="font-semibold">${formatPrice(item.price * item.quantity)}</p>
                    </div>
                `).join('');

                const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                const total = subtotal + SHIPPING_COST;
                checkoutSubtotal.textContent = formatPrice(subtotal);
                checkoutTotal.textContent = formatPrice(total);
                
                if (currentUser) {
                    checkoutEmailEl.value = currentUser.email;
                }
            };

            // --- Product & Page Rendering Logic ---
            const renderProducts = (category = 'all') => {
                productGrid.innerHTML = '';
                const filteredProducts = category === 'all' 
                    ? products 
                    : products.filter(p => p.category === category);

                filteredProducts.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'bg-white rounded-lg shadow-md overflow-hidden flex flex-col group';
                    productCard.innerHTML = `
                        <div class="overflow-hidden">
                          <img src="${product.img}" alt="${product.name}" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-500">
                        </div>
                        <div class="p-4 flex flex-col flex-grow">
                            <h3 class="text-xl font-semibold text-brand-dark-green mb-1 flex-grow">${product.name}</h3>
                            <p class="text-gray-600 text-sm mb-3">${product.description}</p>
                            <div class="mt-auto">
                                <span class="text-lg font-bold text-brand-green">${formatPrice(product.price)} / ${product.unit}</span>
                                <button data-id="${product.id}" class="add-to-cart-btn w-full mt-2 bg-brand-green hover:bg-brand-dark-green text-white font-bold py-2 px-4 rounded-lg transition-colors">
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(productCard);
                });
            };
            
            const showPage = (pageId) => {
                pages.forEach(page => page.classList.toggle('active', page.id === `page-${pageId}`));
                
                const isCheckout = pageId === 'checkout';
                mainHeader.style.display = isCheckout ? 'none' : 'block';
                mainFooter.style.display = isCheckout ? 'none' : 'block';

                if (!isCheckout) {
                    document.querySelectorAll('.nav-link').forEach(link => link.classList.toggle('active', link.hash === `#${pageId}`));
                }
                window.scrollTo(0, 0);
            };

            // --- Event Listeners ---
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.hash.substring(1);
                    showPage(pageId);
                    
                    const category = link.dataset.category;
                    if(category) {
                        renderProducts(category);
                        document.querySelectorAll('#category-filter .category-link').forEach(catLink => catLink.classList.toggle('active', catLink.dataset.category === category));
                    }
                    if (!mobileMenu.classList.contains('hidden')) mobileMenu.classList.add('hidden');
                });
            });

            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            
            categoryFilter.addEventListener('click', (e) => {
                if(e.target.tagName === 'A') {
                    e.preventDefault();
                    const category = e.target.dataset.category;
                    renderProducts(category);
                    document.querySelectorAll('#category-filter .category-link').forEach(link => link.classList.remove('active'));
                    e.target.classList.add('active');
                }
            });

            productGrid.addEventListener('click', (e) => {
                if (e.target.classList.contains('add-to-cart-btn')) {
                    const productId = parseInt(e.target.dataset.id);
                    addToCart(productId);
                }
            });

            // Cart Event Listeners
            cartButton.addEventListener('click', openCart);
            closeCartBtn.addEventListener('click', closeCart);
            cartOverlay.addEventListener('click', (e) => { if (e.target === cartOverlay) closeCart(); });
            
            checkoutBtn.addEventListener('click', () => {
                if (currentUser) {
                    closeCart();
                    renderCheckoutSummary();
                    showPage('checkout');
                } else {
                    openSignInModal();
                }
            });
            
            returnToCartLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage('shop'); 
                openCart();
            });

            cartItemsContainer.addEventListener('click', (e) => {
                const target = e.target;
                const productId = parseInt(target.dataset.id);
                if (!productId) return;
                const itemInCart = cart.find(item => item.id === productId);
                if (!itemInCart) return;

                if (target.classList.contains('cart-plus-btn')) itemInCart.quantity++;
                else if (target.classList.contains('cart-minus-btn')) {
                    itemInCart.quantity--;
                    if (itemInCart.quantity === 0) cart = cart.filter(item => item.id !== productId);
                } else if (target.classList.contains('cart-remove-btn')) {
                    cart = cart.filter(item => item.id !== productId);
                }
                updateCart();
            });

            // --- Initial Render ---
            // IMPORTANT: Replace with your actual Google Client ID
            window.onload = function () {
                google.accounts.id.initialize({
                    client_id: '548147883627-8r9s0kpftv7jj4f4ueklh4j66hnb4uvm.apps.googleusercontent.com',
                    callback: handleCredentialResponse
                });
                google.accounts.id.renderButton(
                    document.getElementById("g_id_signin"),
                    { theme: "outline", size: "large", width: "100%" }
                );
            }

            updateHeaderUI();
            populateStates();
            renderProducts();
            updateCart();
            showPage('home');
        });
    </script>
</body>
</html>
", make all the images url to image names , so I can attach the photos and logos from my computer and remove unwanted categories and add new one's like fresh fruits and also add 3 images slide show and add little description to each products I have mentioned in above query.

